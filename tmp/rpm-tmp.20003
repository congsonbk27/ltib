#!/bin/sh

  RPM_SOURCE_DIR="/home/kienpham/Huy_Nguyen/ltib-channel2-Lcd23-debug/rpm/SOURCES"
  RPM_BUILD_DIR="/home/kienpham/Huy_Nguyen/ltib-channel2-Lcd23-debug/rpm/BUILD"
  RPM_OPT_FLAGS="-O2"
  RPM_ARCH="i386"
  RPM_OS="linux"
  export RPM_SOURCE_DIR RPM_BUILD_DIR RPM_OPT_FLAGS RPM_ARCH RPM_OS
  RPM_DOC_DIR="/opt/freescale/ltib/usr/doc"
  export RPM_DOC_DIR
  RPM_PACKAGE_NAME="u-boot"
  RPM_PACKAGE_VERSION="2009.08"
  RPM_PACKAGE_RELEASE="imx_11.03.00"
  export RPM_PACKAGE_NAME RPM_PACKAGE_VERSION RPM_PACKAGE_RELEASE
  RPM_BUILD_ROOT="/home/kienpham/Huy_Nguyen/ltib-channel2-Lcd23-debug/tmp/u-boot"
  export RPM_BUILD_ROOT
  
  set -x
  umask 022
  cd /home/kienpham/Huy_Nguyen/ltib-channel2-Lcd23-debug/rpm/BUILD
cd u-boot-2009.08
: ${PKG_U_BOOT_CONFIG_TYPE:?must be set, e.g. MPC8548CDS_config}
PKG_U_BOOT_PATH_PRECONFIG=$(eval echo $PKG_U_BOOT_PATH_PRECONFIG)
SRC_DIR=${PKG_U_BOOT_PATH_PRECONFIG:-/home/kienpham/Huy_Nguyen/ltib-channel2-Lcd23-debug/rpm/BUILD/u-boot-2009.08}
 

BUILD_DIR=/home/kienpham/Huy_Nguyen/ltib-channel2-Lcd23-debug/rpm/BUILD/u-boot-2009.08
if [ $SRC_DIR != $BUILD_DIR ]
then
    mkdir -p $BUILD_DIR
fi
cd $SRC_DIR
if [ -n "$LTIB_FULL_REBUILD" ]
then
    make HOSTCC="$BUILDCC" CROSS_COMPILE=$TOOLCHAIN_PREFIX O=$BUILD_DIR distclean
fi
make HOSTCC="$BUILDCC" CROSS_COMPILE=$TOOLCHAIN_PREFIX O=$BUILD_DIR $PKG_U_BOOT_CONFIG_TYPE
make HOSTCC="$BUILDCC" HOSTSTRIP="$BUILDSTRIP" \
     CROSS_COMPILE=$TOOLCHAIN_PREFIX $PKG_U_BOOT_BUILD_ARGS \
     O=$BUILD_DIR all

exit 0